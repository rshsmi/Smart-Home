type: 'custom:hc_light_weather'    # tells HA to use your custom light weather card
# Multi-entity card: light.first_floor, light.front_door, weather.forecast_home

hc_light_weather:
  type: 'custom:button-card'
  entity: weather.forecast_home  # primary entity for the card
  show_label: false
  show_state: false
  show_name: false
  show_icon: false
  tap_action:
    action: none

  styles:
    grid:
      - grid-template-areas: |
          'light_first_floor light_front_door'
          'weather_graphs weather_graphs'
      - grid-template-rows: 170px 200px
      - grid-template-columns: 1fr 1fr
      - gap: 20px
    card:
      - background-color: 'var(--ha-card-background)'
      - border-radius: 12px
      - padding: 20px
      - box-shadow: '0 2px 8px rgba(0,0,0,0.1)'
      - height: 410px
    custom_fields:
      light_first_floor:
        - grid-area: light_first_floor
        - justify-self: center
        - align-self: center
      light_front_door:
        - grid-area: light_front_door
        - justify-self: center
        - align-self: center
      weather_graphs:
        - grid-area: weather_graphs
        - position: relative
        - width: 100%
        - height: 200px
        - justify-self: stretch
        - align-self: stretch

  custom_fields:
    light_first_floor:
      card:
        type: custom:button-card
        entity: light.first_floor
        name: "Upstairs"
        show_name: true
        show_state: false
        show_icon: true
        icon: mdi:lightbulb
        tap_action:
          action: toggle
        state:
          - value: 'on'
            styles:
              card:
                - background-color: '#FFAB91'
                - color: 'white'
              name:
                - color: 'white'
              icon:
                - color: 'white'
          - value: 'off'
            styles:
              card:
                - background-color: 'transparent'
                - color: 'var(--primary-text-color)'
              name:
                - color: 'var(--primary-text-color)'
              icon:
                - color: 'var(--primary-text-color)'
        styles:
          card:
            - border: 2px solid '#E8E8E8'
            - border-radius: 8px
            - padding: 16px
            - height: 150px
            - width: 150px
            - cursor: pointer
            - transition: all 0.3s ease
          name:
            - font-size: 14px
            - font-weight: bold
          icon:
            - size: 32px

    light_front_door:
      card:
        type: custom:button-card
        entity: light.front_door
        name: "Downstairs"
        show_name: true
        show_state: false
        show_icon: true
        icon: mdi:lightbulb
        tap_action:
          action: toggle
        state:
          - value: 'on'
            styles:
              card:
                - background-color: '#FFAB91'
                - color: 'white'
              name:
                - color: 'white'
              icon:
                - color: 'white'
          - value: 'off'
            styles:
              card:
                - background-color: 'transparent'
                - color: 'var(--primary-text-color)'
              name:
                - color: 'var(--primary-text-color)'
              icon:
                - color: 'var(--primary-text-color)'
        styles:
          card:
            - border: 2px solid '#E8E8E8'
            - border-radius: 8px
            - padding: 16px
            - height: 150px
            - width: 150px
            - cursor: pointer
            - transition: all 0.3s ease
          name:
            - font-size: 14px
            - font-weight: bold
          icon:
            - size: 32px

    weather_graphs:
      card:
        type: custom:mini-graph-card
        entities:
          - entity: weather.forecast_home
            attribute: temperature
            name: >
              [[[
                return `${states['weather.forecast_home'].attributes.temperature}Â°C`;
              ]]]
            show_fill: true
            show_line: false
            color: "#FF6B6B"
            y_axis: secondary
          - entity: weather.forecast_home
            attribute: humidity  
            name: >
              [[[
                return `${states['weather.forecast_home'].attributes.humidity}%`;
              ]]]
            show_fill: true
            show_line: false
            color: "#4ECDC4"
            y_axis: primary
          - entity: weather.forecast_home
            attribute: wind_speed
            name: >
              [[[
                return `${states['weather.forecast_home'].attributes.wind_speed} km/h`;
              ]]]
            show_fill: true
            show_line: false
            color: "#B0B0B0"
            y_axis: secondary
        show:
          name: false
          icon: false
          state: false
          points: false
          labels: false
          legend: true
        height: 200
        line_width: 1
        aggregate_func: max
        smoothing: true
        tap_action:
          action: none
        card_mod:
          style: |
            ha-card {
              background: none !important;
              box-shadow: none !important;
              border: none !important;
              width: calc(100% + 60px) !important;
              height: 100% !important;
              margin: 0 -30px !important;
              padding: 0 !important;
              overflow: visible !important;
            }
            .graph {
              width: 100% !important;
              margin: 0 !important;
              padding: 0 !important;
            }
            .graph__legend {
              display: flex !important;
              justify-content: flex-start !important;
              width: 100% !important;
              margin: 0 30px !important;
              gap: 20px !important;
            }

