  type: 'custom:button-card'
  show_state: true
  show_name: true
  show_label: true
  name: 'EV Charging Cost'
  state_display: |
    [[[
      var session_energy = states['sensor.anderson_ev_charger_connection_session_energy'];
      var accumulated_energy = states['sensor.ev_charger_accumulated_session_energy'];
      
      if (!accumulated_energy || !accumulated_energy.state) {
        return 'Total: £0.00 (0.0 kWh)';
      }
      
      var total_kwh = parseFloat(accumulated_energy.state);
      
      if (isNaN(total_kwh) || total_kwh === 0) {
        return 'Total: £0.00 (0.0 kWh)';
      }
      
      // Use 7p per kWh
      var price_per_kwh = 0.07;
      var total_cost = total_kwh * price_per_kwh;
      
      return 'Total: £' + total_cost.toFixed(2) + ' (' + total_kwh.toFixed(1) + ' kWh)';
    ]]]
  styles:
    card:
      - background: 'transparent'
      - border-radius: 12px
      - padding: 8px
      - box-shadow: 'none'
      - height: auto
      - position: relative
      - overflow: hidden
    state:
      - font-size: 16px
    label:
      - font-size: 14px
      - justify-self: start
      - align-self: start
      - padding-left: 10px
      - padding-top: 30px